# HTTP 개관

- 전 세계의 웹 브라우저, 웹 애플리케이션은 모두 HTTP(Hypertext Transfer Protocol)를 통해 서로 대화한다.

## 1.1 HTTP: 인터넷의 멀티미디어 배달부

- HTTP는 전 세계의 웹 서버로부터 대량의 정보를 빠르고, 간편하고, 정확하게 사람들의 PC의 웹 브라우저로 옮겨준다.
- HTTP는 신뢰성있는 데이터 전송 프로토콜(TCP)을 사용하기 때문에, 데이터가 지구 반대편에서 오더라도 전송 중 손상되거나 꼬이지 않음을 보장한다.
- 쉽게 말하면 HTTP는 "편지 내용과 양식", TCP는 "우편 배달부" 이다.

## 1.2 웹 클라이언트와 웹 서버

- HTTP 클라이언트와 HTTP 서버는 www(World Wide Web)의 기본 요소이다.
- HTTP 클라이언트 (사용자)가 웹 서버에 특정 페이지에 대해 요청을 하면 HTTP 서버는 그에 맞는 데이터를 보내주는 역할을 한다.

## 1.3 리소스

- HTTP 서버에서 리소스를 관리하고 제공한다.
- 가장 단순한 웹 리소스는 정적 파일이다. (txt 파일, html 파일, word 파일, pdf 파일, 이미지 파일, 동영상 등)
- 그러나 리소스는 반드시 정적 파일이어야 할 필요는 없다. 리소스는 요청에 따라 콘텐츠를 생산하는 프로그램이 될 수도 있다.
- 동적 파일은 사용자가 누구인지, 어떤 정보를 요청했는지, 몇 시인지에 따라 다른 콘텐츠를 생성한다.
  (ex. 실시간 라이브 영상, 주식 거래 차트, 쇼핑몰에서 제품 구매, 인터넷 도서 검색 등)

### 1.3.1 미디어 타입

- 웹에서 전송되는 수천 가지 데이터의 타입을 다루기 위해 각 콘텐츠 각각에 MIME(Multipurpose Internet Mail Extensions) 이라는 데이터 포맷 라벨을 붙인다.
- 원래는 메일을 보내는 시스템 사이에서 설계되었지만 훗날 HTTP에서도 채택되었다.
- MIME 타입은 사선(/)으로 구분된 주 타입과 부 타입으로 이루어진 문자열 라벨이다. 예를 들어

  - HTML로 작성된 텍스트 문서는 text/html 라벨이 붙는다.
  - plain ASCII(순수 텍스트) 문서는 text/plain이 붙는다.
  - JPEG 이미지는 image/jpeg가 붙는다.
  - GIF 이미지는 image/gif가 붙는다.

  이 외에도 수백 가지의 MIME 타입이 존재한다.

### 1.3.2 URI

- 웹 서버 리소스는 각자 이름을 갖고 있기 때문에, 클라이언트는 관심 있는 리소스를 지목할 수 있다.
- 서버 리소스 이름은 URI(Uniform resource identifier) 로 불린다. 예를 들어

  ```http
  https://www.instagram.com/hello_world
  ```

  - https:// - HTTP 프로토콜을 사용한다.
  - i.pinimg.com - 해당 주소로 이동
  - a0691db61e9176c66dfbe8938b2d5fc0.jpg - 리소스 제공

- URI는 특정 자원을 고유하게 식별한다. URL의 상위 개념이다.

### 1.3.3 URL

- URL은 특정 서버의 한 리소스에 대해 정확히 어디에 있고 어떻게 접근할 수 있는지 알려준다.

```http
http://www.naver.com, http://www.yahoo.com/images/logo.gif
```

- 오늘날 대부분의 URI는 URL이다.

## 1.4 트랜잭션

- 클라이언트가 요청 명령을 서버로 보내는 것과, 서버에서 클라이언트로 돌려주는 응답 결과로 구성되어 있다.

### 1.4.1 메서드

- HTTP는 HTTP 메서드라고 불리는 여러 가지 종류의 요청 명령을 지원한다.
- 모든 HTTP 요청 메세지는 한 개의 메서드를 갖는다.
- 메서드는 서버에게 어떤 동작이 취해져야 하는지 말해준다. (웹 페이지 가져오기, 파일 삭제하기 등) 예를 들어

| HTTP 메서드 | 설명                                                            |
| ----------- | --------------------------------------------------------------- |
| GET         | 서버에서 클라이언트로 지정한 리소스를 제공                      |
| PUT         | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장 |
| DELETE      | 클라이언트에서 서버로 요청한 리소스를 삭제                      |
| POST        | 클라이언트 데이터를 서버로 보내서 새로운 리소스를 생성          |
| HEAD        | 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 제공             |

이 있다. 나머지는 3장에서 상세히 서술한다.

### 1.4.2 상태 코드

- 모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다.
- 상태 코드는 클라이언트에게 요청이 성공했는지, 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자다.
- 3장에서 상세히 서술한다.

### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다.

- 웹브라우저는 풍부한 데이터를 가진 웹페이지를 가져올 때 대량의 HTTP 트랜잭션을 수행한다.
- 우선 페이지 레이아웃을 서술하는 HTML '뼈대'를 한 번의 트랜 잭션으로 가져온다.
- 이후 첨부된 데이터, 이미지 등을 가져오기 위해 추가로 HTTP 트랜잭션들을 수행한다.

## 1.5 메시지

- HTTP 메시지는 단순한 줄 단위의 문자열이다.
- 웹 클라이언트에서 웹 서버로 보낸 HTTP 메시지를 요청 메시지라고 부른다.
- 웹 서버에서 클라이언트로 가는 메시지는 응답 메시지라고 부른다.
- HTTP 메시지는 다음의 세 부분으로 이루어진다.
  - **시작줄**
    - 첫 줄, 요청이라면 메서드를 통해 무엇을 해야 하는지, 응답이라면 상태 코드를 통해 무슨 일이 일어났는지 나타낸다.
  - **헤더**
    - 각 헤더 필드는 하나의 이름: 하나의 값으로 구성된다. 리소스 타입 등을 포함하고 있다.
  - **본문**
    - 필요에 따라 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이다.
    - 요청의 본문은 클라이언트에서 웹 서버로 데이터를 실어 보낸다.
    - 응답의 본문은 클라이언트로 데이터를 반환한다.

## 1.6 TCP 커넥션

### 1.6.1 TCP/IP

- HTTP는 네트워크 통신의 핵심적인 세부 사항에 대해서는 신경 쓰지 않는다.
- 대신 대중적이고 신뢰성 있는 인터넷 전송 프로토콜인 TCP/IP에게 맡긴다.
- TCP는 다음을 제공한다.

  - 데이터 손실 방지 (전송 중에 데이터가 유실되면 재전송 요청)
  - 순서 보장 (보낸 순서대로 데이터가 도착하도록 정렬)
  - 중복 방지 (같은 데이터가 중복해서 전송되지 않도록 처리)
  - 오류 검출 및 수정 (전송 중 오류를 감지)

- TCP 커넥션이 맺어지면, 클라이언트와 서버 컴퓨터 간에 교환되는 메시지가 없어지거나 손상되는 일은 결코 없다.

### 1.6.2 접속, IPO 주소 그리고 포트번호

- HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, 인터넷 프로토콜 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.
- TCP에서는 서버 컴퓨터에 대한 IP 주소와 그 서버에서 실행 중인 프로그램이 사용 중인 포트번호가 필요하다.

```http
http://207.200.83.29:80
```

- 207.200.83.29 는 서버 컴퓨터에 대한 IP 주소이다.
- :80은 서버에서 실행중인 프로그램이 사용 중인 포트번호이다.

## 1.7 프로토콜 버전

### 1.7.1 HTTP/0.9

- 심각한 디자인 결함이 다수 있고 구식 클라이언트하고만 사용할 수 있다.
- 오직 GET 메서드만 지원한다.
- 멀티미디어 콘텐츠에 대 한 MIME 타입이나, HTTP 헤더, 버전 번호는 지원하지 않는다.
- 간단한 HTML 객ㅊ ㅔ를 받아오기 위해 만들어진 것이다.

### 1.7.2 HTTP/1.0

- 처음으로 널리 쓰이기 시작한 HTTP 버전이다.
- 버전 번호, HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리를 추가했다.
- 시각적으로 매력적인 웹페이지와 상호작용하는 폼을 실현했다.
- 하지만 결코 잘 정의된 버전이 아니다. 상업적, 학술적으로 급성장하던 시기에 만들어진 버전이다.

### 1.7.3 HTTP/1.0+

- 1.0 버전에 가상 호스팅 지원, 프록시 연결 지원을 포함한 규격 외의 버전이다.

### 1.7.4 HTTP/1.1

- 1.0 버전의 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거에 집중된 버전이다.

### 1.7.5 HTTP/2.0

- 1.1 성능 문제를 개선하기 위한 SPDY 프로토콜을 기반으로 설계된 버전이다. 10장에 상세히 서술한다.

## 1.8 웹의 구성요소

- 인터넷과 상호작용할 수 있는 웹 애플리케이션

### 1.8.1 프록시

- 클라이언트와 서버 사이에 위치한 HTTP 중개자이다.
- 웹 보안, 애플리케이션 통합, 성능 최적화를 위한 중요한 구성요소이다.
- 클라이언트의 모든 HTTP 요청을 받아 수정한 뒤에 사용자를 대신해서 서버에 접근하여 요청을 전달한다.
- 주로 보안을 위해 사용된다. 모든 웹 트래픽 흐름 속에서 신뢰할 만한 중개자이다.
- 요청과 응답을 필터링한다. 바이러스를 검출하거나, 성인 콘텐츠를 차단하는 등의 역할도 한다. 6장에서 상세히 서술한다.

### 1.8.2 캐시

- 자신을 거쳐가는 데이터들 중 자주 중복되는 것의 사본을 저장해두는 특별한 종류의 프록시 서버이다.
- 클라이언트는 멀리 떨어진 웹 서버보다 근처의 캐시에서 훨씬 더 빨리 데이터를 전달받을 수 있다. 7장에서 상세히 서술한다.

### 1.8.3 게이트웨이

- 다른 서버들의 중개자로 동작하는 서버이다.
- 게이트웨이는 언제나 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룬다.
- 주로 방화벽, 공유기 등에서 사용된다. 8장에서 상세히 서술한다.

### 1.8.4 터널

- 터널은 두 커넥션 사이에서 데이터를 열어보지 않고 그대로 전달해준다.
- 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용한다.
- 대표적인 예로 사내 방화벽 등이 있다. 8장에서 상세히 서술한다.
